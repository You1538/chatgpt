<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>A-Frame Color Change</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
</head>
<body>
    <a-scene>
        <!-- カメラ -->
        <a-entity camera look-controls></a-entity>

        <!-- 赤い立方体 -->
        <a-box id="redBox" color="yellow" position="0 0 -1"></a-box>
    </a-scene>

    <script>
        // カメラと赤い立方体の距離を監視する関数
        function checkDistance() {
            const camera = document.querySelector('a-camera');
            const redBox = document.querySelector('#redBox');
            
            // カメラと赤い立方体の位置を取得
            const cameraPosition = new THREE.Vector3().setFromMatrixPosition(camera.object3D.matrixWorld);
            const redBoxPosition = new THREE.Vector3().setFromMatrixPosition(redBox.object3D.matrixWorld);

            // 二つの位置の距離を計算
            const distance = cameraPosition.distanceTo(redBoxPosition);

            // 距離が10メートル未満の場合、色を黄色に変更
            if (distance < 30) {
                redBox.setAttribute('color', 'red');
            } else {
                redBox.setAttribute('color', 'blue');
            }
        }

        // カメラの位置が変更されるたびに距離をチェック
        const camera = document.querySelector('a-camera');
        camera.addEventListener('componentchanged', checkDistance);

        // 初期状態で距離をチェック
        checkDistance();
    </script>
</body>
</html>
